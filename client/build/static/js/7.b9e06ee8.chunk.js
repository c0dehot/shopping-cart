(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[7],{50:function(e,t,a){},51:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var r=a(8),s=a.n(r),c=a(12),n=a(3),i=a(1),l=a(14),o=a(16);function d(e){return new Promise((function(t,a){var r=new DataView(e);65496!=r.getUint16(0,!1)&&t(-2);for(var s=r.byteLength,c=2;c<s;){var n=r.getUint16(c,!1);if(c+=2,65505==n){1165519206!=r.getUint32(c+=2,!1)&&t(-1);var i=18761==r.getUint16(c+=6,!1);c+=r.getUint32(c+4,i);var l=r.getUint16(c,i);c+=2;for(var o=0;o<l;o++)274==r.getUint16(c+12*o,i)&&t(r.getUint16(c+12*o+8,i))}else{if(65280!=(65280&n))break;c+=r.getUint16(c,!1)}}t(-1)}))}var u={exifOrientation:d,loadImagePreview:function(e){return new Promise((function(t,a){var r=e.target.files[0];if(e.target&&e.target.files[0]){var n=[0,!1],i=0,l=new FileReader;l.onload=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(l.result);case 2:i=e.sent,e.t0=i,e.next=2===e.t0?6:3===e.t0?8:4===e.t0?10:5===e.t0?12:6===e.t0?14:7===e.t0?16:8===e.t0?18:(e.t0,20);break;case 6:return n=[0,!0],e.abrupt("break",22);case 8:return n=[180,!1],e.abrupt("break",22);case 10:return n=[180,!0],e.abrupt("break",22);case 12:return n=[90,!0],e.abrupt("break",22);case 14:return n=[-90,!1],e.abrupt("break",22);case 16:return n=[-90,!0],e.abrupt("break",22);case 18:return n=[90,!1],e.abrupt("break",22);case 20:return n=[0,!1],e.abrupt("break",22);case 22:case"end":return e.stop()}}),e)}))),l.readAsArrayBuffer(r);var u=new FileReader;u.onloadend=function(){t([u.result].concat(Object(o.a)(n),[i]))},u.readAsDataURL(r)}}))},invPixel:function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"}},b=(a(50),a(0));u.invPixel;function j(e){var t=Object(i.useState)(0),a=Object(n.a)(t,2),r=a[0],o=a[1],d=Object(i.useState)(!1),j=Object(n.a)(d,2),p=j[0],m=j[1],f=Object(i.useState)(""),h=Object(n.a)(f,2),v=h[0],O=h[1],x=Object(i.useRef)();function g(){return(g=Object(c.a)(s.a.mark((function t(a){var r,c,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,u.loadImagePreview(a);case 3:r=t.sent,c=Object(n.a)(r,3),i=c[0],c[1],c[2],O(i),m(!0),e.mediaAttach(!0,"",e.mediaTarget);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(){return(A=Object(c.a)(s.a.mark((function t(a){var r,c,n,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),x.current.value=null,m(!1),"data:"!==v.substr(0,5)){t.next=6;break}return O(e.mediaUrl),t.abrupt("return");case 6:return console.log("[mediaDelete] proper URL mediaUrl(".concat(v,")")),r=v.substr(v.lastIndexOf("/")+1,24),t.next=10,Object(l.a)("/api/media/".concat(r),"delete");case 10:c=t.sent,n=c.status,i=c.message,console.log("[MediaUpload] delete comlete status(".concat(n,") message(").concat(i,")")),n&&(console.log(" .. media deleted!: ".concat(i,", clearing mediaUrl!")),O(null),console.log("[MediaUpload.js] calling props.mediaAttach(false,'','".concat(e.mediaTarget,"','").concat(i,"') - expecting user to update with media removed!")),e.mediaAttach(!1,"CLEAR",e.mediaTarget,"Important: Please SAVE the organization to update deleted media!"));case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(){return(k=Object(c.a)(s.a.mark((function t(a){var c,n,i,o,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),c=e.mediaUrl?e.mediaUrl.substr(e.mediaUrl.lastIndexOf("/")+1,24):"",t.next=4,Object(l.a)("/api/media/".concat(e.mediaDimensions,",").concat(r,"/").concat(c),"post","#mainForm");case 4:n=t.sent,i=n.status,o=n.mediaUrl,d=n.message,i&&(console.log(" .. upload valid message: ".concat(d)),x.current.value=null,O(o),m(!1),console.log("[MediaUpload.js] calling props.mediaAttach(false,'".concat(o,"','").concat(e.mediaTarget,"','").concat(d,"')")),e.mediaAttach(!1,o,e.mediaTarget,d));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(i.useEffect)((function(){O(e.mediaUrl)}),[e.mediaUrl]),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{class:"media-attachment",style:{height:e.sampleUrl||v?e.displayHeight:"33px"},children:[Object(b.jsxs)("span",{class:"media-upload btn btn-outline-primary",children:[Object(b.jsx)("i",{class:"fas fa-cloud-upload-alt"}),"\xa0 Attach Media"]}),v&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{onClick:function(e){return A.apply(this,arguments)},class:"media-delete btn btn-outline-danger",children:"x"}),Object(b.jsx)("div",{style:{backgroundImage:"url(".concat(v,")"),transform:"rotate(".concat(r,"deg)")}})]}),e.sampleUrl&&!v&&Object(b.jsx)("img",{src:e.sampleUrl,width:"100%",class:"img-thumbnail",alt:""}),Object(b.jsx)("input",{onChange:function(e){return g.apply(this,arguments)},type:"file",ref:x,id:"mediaFile",name:"mediaFile",accept:"image/*",class:"form-control"}),Object(b.jsx)("img",{onClick:function(){return o(r-90)},className:"image-rotate-left "+(p?"":"d-none"),src:"assets/rotate90.svg",alt:""}),Object(b.jsx)("img",{onClick:function(){return o(r+90)},className:"image-rotate-right "+(p?"":"d-none"),src:"assets/rotate90.svg",alt:""}),p&&Object(b.jsx)("button",{onClick:function(e){return k.apply(this,arguments)},class:"btn btn-primary",children:"Upload"})]})})}},77:function(e,t,a){"use strict";a.r(t);var r=a(8),s=a.n(r),c=a(2),n=a(12),i=a(3),l=a(1),o=a(4),d=a(5),u=a(14),b=a(51),j=a(0);t.default=function(){var e=Object(d.b)(),t=Object(i.a)(e,2),a=t[0].isAdmin,r=t[1],p=Object(l.useState)({}),m=Object(i.a)(p,2),f=m[0],h=m[1],v=Object(l.useRef)(),O=Object(l.useRef)({});function x(){return(x=Object(n.a)(s.a.mark((function e(){var t,a,c,n,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)("/api/users");case 2:if(t=e.sent,a=t.status,c=t.data,n=t.message,a){e.next=9;break}return r({type:"USER_LOGOUT",message:n}),e.abrupt("return");case 9:i=c[0],h(i),Object.keys(i).forEach((function(e){O.current[e]&&(O.current[e].value=i[e])}));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(n.a)(s.a.mark((function e(t){var a,n,i,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),v.current.checkValidity()){e.next=5;break}return v.current.classList.add("was-validated"),console.log(" .. page validation failed, see red boxes."),e.abrupt("return");case 5:if(!f.mediaPending){e.next=8;break}return r({type:"ALERT_MESSAGE",message:"Please [Upload] picture before saving."}),e.abrupt("return");case 8:if(!(O.current.password.value.length>0&&O.current.password.value!==O.current.password2.value)){e.next=12;break}return O.current.password.focus(),r({type:"ALERT_MESSAGE",message:"Invalid or non-matching passwords, pls chk!"}),e.abrupt("return");case 12:return a=Object(c.a)(Object(c.a)({},f),{},{password:""}),Object.keys(O.current).forEach((function(e){a[e]=O.current[e].value})),console.log(" .. item saveData: ",a),e.next=17,Object(u.a)("/api/users","put",a);case 17:if(n=e.sent,i=n.status,l=n.message,i){e.next=23;break}return r({type:"ALERT_MESSAGE",message:l}),e.abrupt("return");case 23:r({type:"USER_SESSION_ADMIN",data:a,message:l}),O.current.password.value="",O.current.password2.value="",v.current.classList.remove("was-validated");case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(l.useEffect)((function(){a&&function(){x.apply(this,arguments)}()}),[a]),Object(j.jsx)("form",{ref:v,id:"mainForm",encType:"multipart/form-data",method:"post",children:Object(j.jsxs)("div",{class:"card",children:[Object(j.jsx)("div",{class:"card-header",children:Object(j.jsx)("h4",{children:"Account Settings"})}),Object(j.jsxs)("div",{class:"card-body",children:[Object(j.jsx)("div",{class:"card-subtitle pb-4",children:Object(j.jsxs)("ul",{class:"nav nav-pills card-header-tabs",children:[Object(j.jsx)("li",{class:"nav-item",children:Object(j.jsx)(o.c,{to:"/admin/settings/user",className:"nav-link",activeClassName:"active",children:"Profile"})}),Object(j.jsx)("li",{class:"nav-item",children:Object(j.jsx)(o.c,{to:"/admin/settings/org",className:"nav-link",activeClassName:"active",children:"Organization"})}),Object(j.jsx)("li",{class:"nav-item",children:Object(j.jsx)(o.c,{to:"/admin/settings/affiliate",className:"nav-link",activeClassName:"active",children:"Affiliate Invites"})}),Object(j.jsx)("li",{class:"nav-item",children:Object(j.jsx)(o.c,{to:"/admin/settings/financial",className:"nav-link",activeClassName:"active",children:"Financial"})})]})}),Object(j.jsxs)("div",{class:"row",children:[Object(j.jsxs)("div",{class:"col-12 col-lg-6",children:[Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsx)("label",{for:"name",children:"Your Name"}),Object(j.jsx)("input",{ref:function(e){return O.current.name=e},type:"text",id:"name",class:"form-control",required:!0}),Object(j.jsx)("div",{class:"invalid-feedback",children:"Please enter your name"})]}),Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsx)("label",{for:"name",children:"Security"}),"\xa0 Role: ",Object(j.jsx)("b",{children:f.role})]}),Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsx)("label",{for:"phone",class:"form-label",children:"Your Phone"}),Object(j.jsx)("input",{ref:function(e){return O.current.phone=e},id:"phone",type:"tel",class:"form-control",placeholder:"(999)999-9999",required:!0}),Object(j.jsx)("div",{class:"invalid-feedback",children:"Please give your phone number to receive update texts."})]}),Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsxs)("label",{for:"org_phone",class:"form-label",children:["Your ",Object(j.jsx)("b",{children:"Login"})," Email"]}),!f.isVerified&&Object(j.jsxs)("div",{class:"text-danger",children:[Object(j.jsx)("i",{class:"fas fa-info-circle"})," Please check your email for verification link!"]}),Object(j.jsx)("input",{ref:function(e){return O.current.email=e},id:"email",class:"form-control",required:!0}),Object(j.jsx)("div",{class:"invalid-feedback",children:"Please give your email for notifications."})]}),Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsxs)("label",{for:"password",class:"form-label",children:[Object(j.jsx)("i",{class:"fas fa-unlock-alt"})," Change ",Object(j.jsx)("b",{children:"Login"})," Password"]}),Object(j.jsxs)("div",{class:"row",children:[Object(j.jsxs)("div",{class:"col",children:[Object(j.jsx)("input",{ref:function(e){return O.current.password=e},id:"password",type:"password",class:"form-control",pattern:".{8,}",placeholder:"Password"}),Object(j.jsxs)("div",{class:"invalid-feedback",children:["Please enter a password ",Object(j.jsx)("b",{children:"(8 chars min)"}),", then re-type."]})]}),Object(j.jsx)("div",{class:"col",children:Object(j.jsx)("input",{ref:function(e){return O.current.password2=e},type:"password",class:"form-control",pattern:".{8,}",placeholder:"Re-Type Password"})})]})]})]}),Object(j.jsx)("div",{class:"col-12 col-lg-6",children:Object(j.jsxs)("div",{class:"mb-3 h-100",children:[Object(j.jsx)("label",{for:"info",class:"form-label",children:"Profile Picture"}),Object(j.jsx)(b.a,{mediaDimensions:"1024x1024",displayHeight:"30vh",sampleUrl:"",mediaUrl:f.thumbnail,mediaIdx:0,mediaAttach:function(e,t,a){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";console.log("mediaAttach] idx(".concat(a,") image(").concat(t,"):")),h(""!==t?Object(c.a)(Object(c.a)({},f),{},{mediaPending:e,thumbnail:t}):Object(c.a)(Object(c.a)({},f),{},{mediaPending:e})),s&&r({type:"ALERT_MESSAGE",message:s})}}),Object(j.jsx)("div",{class:"invalid-feedback",children:"Please provide a selfie pic."})]})})]})]}),Object(j.jsx)("div",{class:"card-footer",children:Object(j.jsx)("button",{onClick:function(e){return g.apply(this,arguments)},class:"btn btn-primary mx-1",children:"Update Profile"})})]})})}}}]);
//# sourceMappingURL=7.b9e06ee8.chunk.js.map