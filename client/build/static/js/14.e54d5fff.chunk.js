(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[14],{71:function(e,r,s){"use strict";s.r(r);var t=s(8),c=s.n(t),a=s(12),n=s(3),l=s(1),i=s(6),o=s(4),d=s(5),b=s(14),u=s(27),j=s(0);r.default=function(){var e=Object(d.b)(),r=Object(n.a)(e,2)[1],s=Object(l.useState)(localStorage.session&&!0),t=Object(n.a)(s,2),h=t[0],f=t[1],p=Object(i.h)().refCode||"",m=Object(l.useRef)(),x=Object(l.useRef)({});function O(e){e&&e.preventDefault(),localStorage.session="",localStorage.email="",x.current.email.value="",f(!1),console.log("~ cleared session!")}function v(){return(v=Object(a.a)(c.a.mark((function e(s){var t,a,n,l,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),m.current.checkValidity()){e.next=4;break}return m.current.classList.add("was-validated"),e.abrupt("return");case 4:if(t={},["name","address","phone","email","password","password2","refCode"].forEach((function(e){t[e]=x.current[e].value})),!(t.password.length<3||t.password!==t.password2)){e.next=11;break}return x.current.password.current.focus(),r({type:"ALERT_MESSAGE",message:"Invalid or non-matching passwords"}),e.abrupt("return");case 11:if(x.current.terms.checked||!x.current.beta.checked){e.next=15;break}return x.current.terms.current.focus(),r({type:"ALERT_MESSAGE",message:"Please confirm the checkboxes: terms and our beta-mode disclaimer"}),e.abrupt("return");case 15:return console.log("attempting to signup: '/api/users/signup' with:",t),e.next=18,Object(b.a)("/api/users/signup","post",t);case 18:if(a=e.sent,n=a.status,l=a.session,i=a.userData,o=a.message,console.log(" .. status(".concat(n,") session(").concat(l,") message(").concat(o,") userData: "),i),n){e.next=29;break}return O(),console.log("ALERT_)MESSAGE: message(".concat(o,")")),r({type:"ALERT_MESSAGE",message:o}),e.abrupt("return");case 29:localStorage.session=l,r({type:"USER_LOGIN",data:i,message:o});case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(l.useEffect)((function(){x.current.email.value=localStorage.email||"",!localStorage.refCode&&p&&(localStorage.refCode=p),x.current.refCode.value=localStorage.refCode||p}),[]),Object(j.jsx)(u.a,{children:Object(j.jsx)("form",{ref:m,class:"form-signin",children:Object(j.jsxs)("div",{class:"card mt-5",children:[Object(j.jsxs)("div",{class:"card-header",children:[h&&Object(j.jsxs)("div",{class:"alert alert-danger mb-3",children:[Object(j.jsx)("b",{children:"WARNING"}),": You already have an active session, please log out first:",Object(j.jsx)("hr",{}),Object(j.jsx)("button",{onClick:O,class:"btn btn-warning btn-sm",children:"Logout"}),Object(j.jsx)(o.b,{to:"/admin/orders/LIVE",className:"btn btn-success btn-sm float-end",children:"Go to Dashboard"})]}),Object(j.jsx)("h1",{children:"Welcome!"}),Object(j.jsx)("p",{children:"We are excited to invite you into our restaurant serving family."})]}),Object(j.jsxs)("div",{class:"card-body",children:[Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsx)("label",{for:"name",children:"Restaurant Name"}),Object(j.jsx)("input",{ref:function(e){return x.current.name=e},type:"text",id:"name",class:"form-control",required:!0}),Object(j.jsx)("div",{class:"invalid-feedback",children:"Please enter your restaurant name"})]}),Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsx)("label",{for:"address",class:"form-label",children:"Restaurant Address"}),Object(j.jsx)("textarea",{ref:function(e){return x.current.address=e},id:"address",class:"form-control",rows:"2",placeholder:"22 Some Address, City, Region",required:!0}),Object(j.jsx)("div",{class:"invalid-feedback",children:"Please give the address (it will appear at the top of the menu)"})]}),Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsx)("label",{for:"phone",class:"form-label",children:"Restaurant Phone Number"}),Object(j.jsx)("input",{ref:function(e){return x.current.phone=e},id:"phone",type:"tel",class:"form-control",placeholder:"(999)999-9999",required:!0}),Object(j.jsx)("div",{class:"invalid-feedback",children:"Please give the phone number customers would call."})]}),Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsx)("label",{for:"email",children:"Orders Email Address"}),Object(j.jsx)("input",{ref:function(e){return x.current.email=e},id:"email",type:"email",pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,10}$",class:"form-control",required:!0}),Object(j.jsx)("div",{class:"invalid-feedback",children:"Please the company/order email address - orders will be sent here!"})]}),Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsx)("label",{for:"refCode",children:"Referral/Invite Code"}),Object(j.jsx)("input",{ref:function(e){return x.current.refCode=e},id:"refCode",type:"text",pattern:"[a-zA-Z0-9]{8,9}",class:"form-control"}),Object(j.jsx)("div",{class:"invalid-feedback",children:"Sorry invalid referral code (8-9 characters long), please try another or delete it."})]}),Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsxs)("label",{for:"password",class:"form-label",children:[Object(j.jsx)("i",{class:"fas fa-unlock-alt"})," Admin Login Password"]}),Object(j.jsxs)("div",{class:"row",children:[Object(j.jsxs)("div",{class:"col",children:[Object(j.jsx)("input",{ref:function(e){return x.current.password=e},id:"password",name:"password",type:"password",class:"form-control",pattern:".{8,}",required:!0,placeholder:"Password"}),Object(j.jsxs)("div",{class:"invalid-feedback",children:["Please enter a password ",Object(j.jsx)("b",{children:"(8 chars min)"}),", then re-type."]})]}),Object(j.jsx)("div",{class:"col",children:Object(j.jsx)("input",{ref:function(e){return x.current.password2=e},type:"password",class:"form-control",pattern:".{8,}",required:!0,placeholder:"Re-Type Password"})})]})]})]}),Object(j.jsxs)("div",{class:"card-footer",children:[Object(j.jsxs)("span",{class:"checkbox mb-3",children:[Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{ref:function(e){return x.current.terms=e},id:"terms",type:"checkbox",required:!0}),"\xa0 ",Object(j.jsxs)("small",{class:"text-muted",children:["By clicking create account, you are acknowledging that you agree to our ",Object(j.jsx)("a",{href:"/terms",target:"_blank",children:"Terms of Service"})," and ",Object(j.jsx)("a",{href:"/privacy",target:"_blank",children:"Privacy Policy"}),"."]}),Object(j.jsx)("div",{class:"invalid-feedback mb-2",children:Object(j.jsx)("b",{children:"Please confirm you agree to our terms of service and privacy policy"})})]}),Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{ref:function(e){return x.current.beta=e},id:"beta",type:"checkbox",required:!0}),"\xa0 ",Object(j.jsx)("small",{class:"text-muted",children:"You understand our service is still in beta-mode and there may be glitches (that we will strive to fix promptly however)."}),Object(j.jsx)("div",{class:"invalid-feedback mb-2",children:Object(j.jsx)("b",{children:"Please agree to our beta user notice"})})]})]}),Object(j.jsx)("button",{onClick:function(e){return v.apply(this,arguments)},class:"btn btn-primary mx-1",children:"Signup"}),Object(j.jsx)(o.b,{to:"/login",class:"font-weight-light text-muted mx-3",children:"Already Registered?"})]}),Object(j.jsx)("div",{class:"card-footer"})]})})})}}}]);
//# sourceMappingURL=14.e54d5fff.chunk.js.map