(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[15],{72:function(e,t,r){"use strict";r.r(t);var c=r(8),s=r.n(c),n=r(2),i=r(12),a=r(3),l=r(1),o=r(5),u=r(14),d=r(0);t.default=function(){var e=Object(o.b)(),t=Object(a.a)(e,2),r=t[0].isAdmin,c=t[1],b=Object(l.useState)({}),j=Object(a.a)(b,2),h=j[0],p=j[1],f=Object(l.useState)(""),x=Object(a.a)(f,2),O=x[0],m=x[1],y=Object(l.useRef)(),v=Object(l.useRef)({});function k(){return(k=Object(i.a)(s.a.mark((function e(){var t,r,i,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[loadPage()] called"),e.next=3,Object(u.a)("/api/orgs");case 3:if(t=e.sent,r=t.status,i=t.data,a=t.message,r){e.next=10;break}return c({type:"USER_LOGOUT",message:a}),e.abrupt("return");case 10:Object.keys(i).forEach((function(e){v.current[e]&&(v.current[e].value=i[e]||"")})),Object.keys(i.financial).forEach((function(e){v.current["f_".concat(e)]&&(v.current["f_".concat(e)].value=i.financial[e])})),p(Object(n.a)({},i));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(i.a)(s.a.mark((function e(t){var r,i,a,l,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),y.current.checkValidity()){e.next=6;break}return v.current.url.value=v.current.url.value.toLowerCase(),y.current.classList.add("was-validated"),console.log(".. !x failed validation, returning."),e.abrupt("return");case 6:return r=Object(n.a)({},h),Object.keys(v.current).forEach((function(e){"f_"===e.substr(0,2)?r.financial[e.substr(2)]=v.current[e]?v.current[e].value:"":r[e]=v.current[e]?v.current[e].value:""})),i="/admin/info",e.next=11,Object(u.a)("/api/orgs?url=".concat(encodeURI(i)),"put",r);case 11:if(a=e.sent,l=a.status,o=a.message,l){e.next=16;break}return e.abrupt("return");case 16:c({type:"UPDATE_REDIRECT_GO",redirectUrl:i,message:o});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(l.useEffect)((function(){r&&function(){k.apply(this,arguments)}()}),[r]),Object(d.jsx)("form",{ref:y,children:Object(d.jsxs)("div",{class:"card mt-5",children:[Object(d.jsxs)("div",{class:"card-header",children:[Object(d.jsx)("h1",{children:"Last Step!"}),Object(d.jsx)("p",{children:"You are now registered, just gathering last details before we take products."})]}),Object(d.jsxs)("div",{class:"card-body",children:[Object(d.jsxs)("div",{class:"mb-3",children:[Object(d.jsx)("h4",{children:"Set Unique Shopping Cart Link"}),"This is the link that you will be using for allowing orders on your site, so a unique significant subdomain is a good idea.",Object(d.jsxs)("div",{class:"input-group mb-3",children:[Object(d.jsx)("span",{class:"input-group-text pt-3",children:Object(d.jsx)("h6",{children:"https://restocart.ca/"})}),Object(d.jsx)("input",{ref:function(e){return v.current.url=e},id:"url",type:"text",class:"form-control",pattern:"[a-zA-Z0-9\\-n]{6,}",placeholder:"grillhouse",required:!0}),Object(d.jsx)("div",{class:"invalid-feedback",children:"A unique sub-domain needed: min 6 alpha-numeric characters"})]})]}),Object(d.jsxs)("div",{class:"mb-3",children:[Object(d.jsxs)("button",{onClick:function(e){if(e.preventDefault(),O)m("");else{var t=encodeURIComponent("https://restocart.ca/".concat(v.current.url.value.toLowerCase().trim())),r="https://chart.googleapis.com/chart?chs=500x500&cht=qr&choe=UTF-8&chl=".concat(t);m(r)}},class:"m-2 btn btn-light",children:[Object(d.jsx)("i",{class:"fas fa-qrcode"})," Your QR-Code"]}),Object(d.jsx)("div",{className:O.length>1?"mb-3 d-block":"d-none",children:Object(d.jsx)("a",{href:O,target:"blank",children:Object(d.jsx)("img",{src:O,class:"w-100",alt:"qr code"})})})]}),Object(d.jsxs)("div",{class:"mb-3",children:[Object(d.jsxs)("h4",{children:["Order Payments Online ",Object(d.jsx)("i",{class:"fab fa-cc-stripe text-warning"})]}),Object(d.jsxs)("div",{class:"form-check text-muted",children:[Object(d.jsx)("input",{onClick:function(){return p(Object(n.a)(Object(n.a)({},h),{},{isRequireOnline:!h.isRequireOnline}))},defaultChecked:h.isRequireOnline,id:"isRequireOnline",class:"form-check-input",type:"checkbox"}),Object(d.jsx)("label",{class:"form-check-label text-primary",for:"isRequireOnline",children:Object(d.jsx)("b",{children:"Setup Stripe For Online Orders"})})]}),Object(d.jsxs)("div",{class:"alert alert-warning",children:[Object(d.jsx)("i",{class:"fas fa-info-circle text-warning fa-3x float-start mx-2"})," To receive payments online, you'll need to register on Stripe:",Object(d.jsx)("br",{}),Object(d.jsx)("a",{href:"https://dashboard.stripe.com/register",rel:"noreferrer",target:"_blank",children:"dashboard.stripe.com/register"}),Object(d.jsx)("br",{}),Object(d.jsx)("i",{children:"(If you do not want online payments: you can skip this by unchecking the above box"})]})]}),h.isRequireOnline&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{class:"mb-3",children:[Object(d.jsx)("label",{for:"stripePubKey",class:"form-label",children:"Publishable Key"}),Object(d.jsx)("input",{ref:function(e){return v.current.f_stripePubKey=e},id:"stripePubKey",type:"text",class:"form-control",pattern:"[\\w_]{80,}",placeholder:"pk_live_52IIQ5TFksB71gtFmTQuyIG2knRZNqhFDwOL10JhcjUxYZ",required:!0}),Object(d.jsxs)("div",{class:"invalid-feedback",children:["From the Stripe ",Object(d.jsx)("u",{children:"Developers > API keys"})," menu, put the ",Object(d.jsx)("b",{children:"Publishable key"})," in here."]})]}),Object(d.jsxs)("div",{class:"mb-3",children:[Object(d.jsx)("label",{for:"stripePrivKey",class:"form-label",children:"Secret Key"}),Object(d.jsx)("input",{ref:function(e){return v.current.f_stripePrivKey=e},id:"stripePrivKey",type:"password",class:"form-control",pattern:"[\\w_]{80,}",placeholder:"sk_live_...",required:!0}),Object(d.jsxs)("div",{class:"invalid-feedback",children:["From your Stripe ",Object(d.jsx)("u",{children:"Developers > API keys"})," menu, put the ",Object(d.jsx)("b",{children:"Secret key"})," in here."]})]}),Object(d.jsxs)("div",{class:"mb-3",children:[Object(d.jsx)("label",{for:"stripeProductKey",class:"form-label",children:"Product Item Key"}),Object(d.jsx)("input",{ref:function(e){return v.current.f_stripeProductKey=e},id:"stripeProductKey",type:"text",class:"form-control",pattern:"[\\w_]{14,}",placeholder:"ex. prod_J1njkdj6m0m8Yg",required:!0}),Object(d.jsxs)("div",{class:"invalid-feedback",children:["In the Stripe ",Object(d.jsx)("u",{children:"Products"})," menu create a product (and give it a name 'Order Total', no description)"]})]}),Object(d.jsxs)("div",{class:"mb-3",children:[Object(d.jsx)("label",{for:"stripeTaxKey",class:"form-label",children:"Stripe Tax-Rate Key(s)"}),Object(d.jsx)("input",{ref:function(e){return v.current.f_stripeTaxKey=e},id:"stripeTaxKey",type:"text",class:"form-control",pattern:"[\\w_]{24,}",placeholder:"ex. txr_23e8VNkqrFDwOL10JhcjUxYZ",required:!0}),Object(d.jsxs)("div",{class:"invalid-feedback",children:["In the Stripe ",Object(d.jsx)("u",{children:"Products"})," menu, click on the ",Object(d.jsx)("u",{children:"Tax rates"})," menu. If you have one location, only the tax-code for that location is needed. If you allow different tax rates depending on location or where the order will ship to, configure multiple tax rates: it will match the code to the buyers shipping location or credit-card location. See: ",Object(d.jsx)("a",{href:"https://stripe.com/docs/payments/checkout/taxes",target:"_blank",rel:"noreferrer",children:"https://stripe.com/docs/payments/checkout/taxes"})]})]})]})]}),Object(d.jsx)("div",{class:"card-footer",children:Object(d.jsx)("button",{onClick:function(e){return g.apply(this,arguments)},class:"btn btn-primary mx-1",children:"Complete Profile"})})]})})}}}]);
//# sourceMappingURL=15.a7086074.chunk.js.map